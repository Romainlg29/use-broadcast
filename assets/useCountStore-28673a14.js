import{r as R,g as V,R as $}from"./index-4d5d99e8.js";const _=t=>{let e;const n=new Set,o=(i,u)=>{const p=typeof i=="function"?i(e):i;if(!Object.is(p,e)){const l=e;e=u??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(S=>S(e,l))}},r=()=>e,v={setState:o,getState:r,getInitialState:()=>f,subscribe:i=>(n.add(i),()=>n.delete(i)),destroy:()=>{n.clear()}},f=e=t(o,r,v);return v},q=t=>t?_(t):_;var M={exports:{}},A={},C={exports:{}},T={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=R;function I(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var j=typeof Object.is=="function"?Object.is:I,B=m.useState,F=m.useEffect,P=m.useLayoutEffect,W=m.useDebugValue;function L(t,e){var n=e(),o=B({inst:{value:n,getSnapshot:e}}),r=o[0].inst,a=o[1];return P(function(){r.value=n,r.getSnapshot=e,x(r)&&a({inst:r})},[t,n,e]),F(function(){return x(r)&&a({inst:r}),t(function(){x(r)&&a({inst:r})})},[t]),W(n),n}function x(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!j(t,n)}catch{return!0}}function z(t,e){return e()}var U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?z:L;T.useSyncExternalStore=m.useSyncExternalStore!==void 0?m.useSyncExternalStore:U;C.exports=T;var k=C.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=R,G=k;function H(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var J=typeof Object.is=="function"?Object.is:H,K=G.useSyncExternalStore,N=w.useRef,Q=w.useEffect,X=w.useMemo,Y=w.useDebugValue;A.useSyncExternalStoreWithSelector=function(t,e,n,o,r){var a=N(null);if(a.current===null){var c={hasValue:!1,value:null};a.current=c}else c=a.current;a=X(function(){function v(l){if(!f){if(f=!0,i=l,l=o(l),r!==void 0&&c.hasValue){var S=c.value;if(r(S,l))return u=S}return u=l}if(S=u,J(i,l))return S;var s=o(l);return r!==void 0&&r(S,s)?S:(i=l,u=s)}var f=!1,i,u,p=n===void 0?null:n;return[function(){return v(e())},p===null?void 0:function(){return v(p())}]},[e,n,o,r]);var d=K(t,a[0],a[1]);return Q(function(){c.hasValue=!0,c.value=d},[d]),Y(d),d};M.exports=A;var Z=M.exports;const tt=V(Z),{useDebugValue:et}=$,{useSyncExternalStoreWithSelector:nt}=tt;const ot=t=>t;function rt(t,e=ot,n){const o=nt(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return et(o),o}const O=t=>{const e=typeof t=="function"?q(t):t,n=(o,r)=>rt(e,o,r);return Object.assign(n,e),n},st=t=>t?O(t):O,it=(t,e)=>(n,o,r)=>{var a;if(typeof BroadcastChannel>"u")return console.warn("BroadcastChannel is not supported in this browser. The store will not be shared."),t(n,o,r);let c=o()!==void 0,d=!1;const v=(a=e==null?void 0:e.name)!=null?a:t.toString();let f=0;const i=[0],u=new BroadcastChannel(v),p=(...s)=>{const h=o();if(n(...s),e!=null&&e.unsync)return;const b=o(),y=Object.entries(b).reduce((g,[E,D])=>(h[E]!==D&&(g={...g,[E]:D}),g),{});u.postMessage({action:"change",state:y})};u.onmessage=s=>{if(s.data.action==="sync"){if(!d)return;const h=Object.entries(o()).reduce((y,[g,E])=>(typeof E!="function"&&typeof E!="symbol"&&(y={...y,[g]:E}),y),{});u.postMessage({action:"change",state:h});const b=i[i.length-1]+1;i.push(b),u.postMessage({action:"add_new_tab",id:b});return}if(s.data.action==="add_new_tab"&&!d&&f===0){f=s.data.id;return}if(s.data.action==="change"&&(n(s.data.state),c=!0),s.data.action==="close"){if(!d)return;const h=i.indexOf(s.data.id);h!==-1&&i.splice(h,1)}s.data.action==="change_main"&&s.data.id===f&&(d=!0,i.splice(0,i.length,...s.data.tabs))};const l=()=>{var s;u.postMessage({action:"sync"}),setTimeout(()=>{c||(d=!0,c=!0)},(s=e==null?void 0:e.mainTimeout)!=null?s:100)},S=()=>{if(u.postMessage({action:"close",id:f}),d){if(i.length===1){u.close();return}const s=i.filter(h=>h!==f);u.postMessage({action:"change_main",id:s[0],tabs:s});return}};return window.addEventListener("beforeunload",S),c||l(),t(p,o,r)},ut=it,ct=st(ut((t,e)=>({count:0,increment:()=>t(n=>({count:n.count+1})),decrement:()=>t({count:e().count-1}),mode:"Sync",setMode:n=>t({mode:n})}),{name:"my-store"}));export{ct as u};
